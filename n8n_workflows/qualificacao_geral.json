{
  "name": "QualificaÃ§Ã£o JurÃ­dica Geral",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "qualificacao_geral",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-start",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300],
      "webhookId": "qualificacao-geral-webhook"
    },
    {
      "parameters": {
        "jsCode": "// Processar dados do chatbot\nconst inputData = $input.all()[0].json;\n\nconst userNumber = inputData.user_number;\nconst message = inputData.message;\nconst caseType = inputData.case_type;\nconst timestamp = inputData.timestamp;\nconst clientInfo = inputData.client_info || {};\n\n// Log dos dados recebidos\nconsole.log('ğŸ“¥ Dados recebidos do chatbot:', {\n  userNumber,\n  message: message.substring(0, 50) + '...',\n  caseType,\n  clientInfo\n});\n\n// Classificar urgÃªncia\nconst urgentKeywords = ['urgente', 'emergÃªncia', 'prisÃ£o', 'delegacia', 'violÃªncia'];\nconst isUrgent = urgentKeywords.some(keyword => \n  message.toLowerCase().includes(keyword)\n);\n\n// Classificar complexidade\nconst complexKeywords = ['empresa', 'contrato', 'milhÃµes', 'internacional'];\nconst isComplex = complexKeywords.some(keyword => \n  message.toLowerCase().includes(keyword)\n);\n\n// Determinar prÃ³xima aÃ§Ã£o\nlet nextAction = 'consulta_padrao';\nlet priority = 'normal';\nlet estimatedValue = 'consulta';\n\nif (isUrgent) {\n  nextAction = 'contato_imediato';\n  priority = 'urgente';\n  estimatedValue = 'emergencia';\n} else if (isComplex) {\n  nextAction = 'analise_detalhada';\n  priority = 'alta';\n  estimatedValue = 'complexo';\n}\n\n// Gerar resposta baseada no tipo de caso\nlet response = '';\n\nswitch(caseType) {\n  case 'familia':\n    response = `ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Entendi que Ã© uma questÃ£o de direito de famÃ­lia.\\n\\nPara te ajudar da melhor forma, vou agendar uma consulta especializada.\\n\\nâœ… Nossos especialistas em famÃ­lia podem orientar sobre:\\nâ€¢ DivÃ³rcio e separaÃ§Ã£o\\nâ€¢ Guarda de filhos\\nâ€¢ PensÃ£o alimentÃ­cia\\nâ€¢ Partilha de bens\\n\\nğŸ“ Gostaria de agendar uma consulta?`;\n    break;\n    \n  case 'acidente':\n    response = `ğŸš— Compreendo que vocÃª passou por um acidente.\\n\\nVou conectar vocÃª com nossa equipe especializada em responsabilidade civil.\\n\\nâœ… Podemos ajudar com:\\nâ€¢ IndenizaÃ§Ã£o por danos\\nâ€¢ NegociaÃ§Ã£o com seguros\\nâ€¢ PerÃ­cia tÃ©cnica\\nâ€¢ Processos de reparaÃ§Ã£o\\n\\nâš–ï¸ Vamos agendar uma avaliaÃ§Ã£o do seu caso?`;\n    break;\n    \n  case 'trabalhista':\n    response = `ğŸ‘” QuestÃµes trabalhistas requerem atenÃ§Ã£o especializada.\\n\\nNossa equipe trabalhista pode te orientar sobre seus direitos.\\n\\nâœ… Ãreas que atuamos:\\nâ€¢ RescisÃ£o e verbas\\nâ€¢ AssÃ©dio no trabalho\\nâ€¢ Horas extras\\nâ€¢ FGTS e benefÃ­cios\\n\\nğŸ“‹ Quer agendar uma consulta trabalhista?`;\n    break;\n    \n  case 'criminal':\n    response = `âš–ï¸ QuestÃµes criminais precisam de atenÃ§Ã£o imediata.\\n\\nNossos criminalistas estÃ£o preparados para te defender.\\n\\nğŸš¨ UrgÃªncia identificada: ${isUrgent ? 'ALTA' : 'NORMAL'}\\n\\nâœ… Podemos ajudar com:\\nâ€¢ Defesa criminal\\nâ€¢ Medidas protetivas\\nâ€¢ Processos policiais\\nâ€¢ Recursos e apelaÃ§Ãµes\\n\\nğŸ“ ${isUrgent ? 'Vou priorizar seu atendimento!' : 'Vamos agendar uma consulta?'}`;\n    break;\n    \n  case 'civel':\n    response = `ğŸ“‹ QuestÃµes cÃ­veis exigem anÃ¡lise detalhada.\\n\\nVamos avaliar a viabilidade do seu caso.\\n\\nâœ… Atuamos em:\\nâ€¢ Contratos e cobranÃ§as\\nâ€¢ IndenizaÃ§Ãµes\\nâ€¢ Disputas empresariais\\nâ€¢ AÃ§Ãµes de reparaÃ§Ã£o\\n\\nğŸ’¼ Complexidade: ${isComplex ? 'ALTA' : 'PADRÃƒO'}\\n\\nğŸ“… Gostaria de uma consulta de avaliaÃ§Ã£o?`;\n    break;\n    \n  default:\n    response = `âš–ï¸ Compreendo sua situaÃ§Ã£o jurÃ­dica.\\n\\nVou conectar vocÃª com nossa equipe mais adequada para seu caso.\\n\\nâœ… O JM ADVOGADOS atua em todas as Ã¡reas do direito:\\nâ€¢ FamÃ­lia e sucessÃµes\\nâ€¢ Criminal e medidas protetivas\\nâ€¢ CÃ­vel e contratos\\nâ€¢ Trabalhista\\nâ€¢ Responsabilidade civil\\n\\nğŸ“ Vamos agendar uma consulta para analisar seu caso?`;\n}\n\n// Resultado final\nconst result = {\n  user_number: userNumber,\n  case_type: caseType,\n  priority: priority,\n  urgency: isUrgent,\n  complexity: isComplex,\n  next_action: nextAction,\n  estimated_value: estimatedValue,\n  response: response,\n  processed_at: new Date().toISOString(),\n  needs_followup: isUrgent || isComplex\n};\n\nconsole.log('ğŸ“¤ Resultado processado:', result);\n\nreturn result;"
      },
      "id": "process-qualification",
      "name": "Processar QualificaÃ§Ã£o",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}"
      },
      "id": "webhook-response", 
      "name": "Resposta Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [640, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Processar QualificaÃ§Ã£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Processar QualificaÃ§Ã£o": {
      "main": [
        [
          {
            "node": "Resposta Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {},
  "versionId": "1"
}
