{
  "name": "QualificaÃ§Ã£o - FIES (Especialidade JM ADVOGADOS)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "qualificacao_fies",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-fies",
      "name": "Webhook FIES",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "jsCode": "// Processar caso FIES - Especialidade JM ADVOGADOS\nconst inputData = $input.all()[0].json;\n\nconst userNumber = inputData.user_number;\nconst message = inputData.message.toLowerCase();\nconst clientInfo = inputData.client_info || {};\n\nconsole.log('ðŸŽ“ Processando caso FIES para:', userNumber);\n\n// Identificar problema especÃ­fico do FIES\nlet problemType = 'geral';\nlet urgency = 'normal';\nlet specificQuestions = [];\nlet estimatedValue = 'medio';\n\n// FIES bloqueado/suspenso\nif (message.includes('bloqueado') || message.includes('suspenso') || message.includes('cancelado')) {\n  problemType = 'bloqueio';\n  urgency = 'alta';\n  estimatedValue = 'alto';\n  specificQuestions = [\n    'Quando foi bloqueado/suspenso?',\n    'Recebeu notificaÃ§Ã£o do motivo?',\n    'Estava em dia com documentaÃ§Ã£o?',\n    'Qual semestre estava cursando?'\n  ];\n}\n\n// Problemas com documentaÃ§Ã£o\nelse if (message.includes('documentaÃ§Ã£o') || message.includes('documento') || message.includes('pendÃªncia')) {\n  problemType = 'documentacao';\n  urgency = 'normal';\n  specificQuestions = [\n    'Quais documentos estÃ£o pendentes?',\n    'JÃ¡ tentou regularizar?',\n    'HÃ¡ prazo limite?',\n    'A faculdade orientou sobre algo?'\n  ];\n}\n\n// Problemas de cobranÃ§a indevida\nelse if (message.includes('cobranÃ§a') || message.includes('cobrando') || message.includes('pagar')) {\n  problemType = 'cobranca';\n  urgency = 'normal';\n  estimatedValue = 'alto';\n  specificQuestions = [\n    'O que estÃ¡ sendo cobrado?',\n    'Qual o valor da cobranÃ§a?',\n    'FIES deveria cobrir essa despesa?',\n    'Tem comprovantes dos pagamentos?'\n  ];\n}\n\n// RenovaÃ§Ã£o FIES\nelse if (message.includes('renovaÃ§Ã£o') || message.includes('renovar') || message.includes('semestre')) {\n  problemType = 'renovacao';\n  urgency = 'normal';\n  specificQuestions = [\n    'Para qual semestre Ã© a renovaÃ§Ã£o?',\n    'Houve mudanÃ§a na renda familiar?',\n    'CadÃšnico estÃ¡ atualizado?',\n    'JÃ¡ tentou fazer pelo FIES SeleÃ§Ã£o?'\n  ];\n}\n\n// TransferÃªncia de curso/instituiÃ§Ã£o\nelse if (message.includes('transferir') || message.includes('transferÃªncia') || message.includes('mudanÃ§a')) {\n  problemType = 'transferencia';\n  urgency = 'normal';\n  specificQuestions = [\n    'Quer transferir para qual curso/faculdade?',\n    'A nova instituiÃ§Ã£o aceita FIES?',\n    'JÃ¡ conversou com as duas faculdades?',\n    'Qual o motivo da transferÃªncia?'\n  ];\n}\n\n// ConclusÃ£o do curso - quitaÃ§Ã£o\nelse if (message.includes('formei') || message.includes('quitaÃ§Ã£o') || message.includes('pagamento')) {\n  problemType = 'quitacao';\n  urgency = 'normal';\n  estimatedValue = 'alto';\n  specificQuestions = [\n    'Quando se formou?',\n    'JÃ¡ recebeu boleto de quitaÃ§Ã£o?',\n    'Qual valor estÃ¡ sendo cobrado?',\n    'Tem dÃºvidas sobre correÃ§Ã£o monetÃ¡ria?'\n  ];\n}\n\n// Gerar resposta especÃ­fica para FIES\nlet response = '';\n\nswitch(problemType) {\n  case 'bloqueio':\n    response = `ðŸš« FIES BLOQUEADO/SUSPENSO\\n\\nJM ADVOGADOS tem experiÃªncia em desbloqueio de FIES.\\n\\nâœ… Podemos conseguir:\\nâ€¢ Desbloqueio do financiamento\\nâ€¢ RegularizaÃ§Ã£o da situaÃ§Ã£o\\nâ€¢ RenegociaÃ§Ã£o com FNDE\\nâ€¢ ManutenÃ§Ã£o dos estudos\\n\\nðŸ“‹ InformaÃ§Ãµes importantes:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nâ° URGENTE: Quanto antes agirmos, melhor!\\n\\nðŸ“ž Vamos resolver seu FIES rapidamente!`;\n    break;\n    \n  case 'documentacao':\n    response = `ðŸ“„ PROBLEMAS DE DOCUMENTAÃ‡ÃƒO FIES\\n\\nVamos regularizar sua situaÃ§Ã£o documental.\\n\\nâœ… OrientaÃ§Ã£o completa:\\nâ€¢ AnÃ¡lise de pendÃªncias\\nâ€¢ OrientaÃ§Ã£o sobre documentos\\nâ€¢ IntermediaÃ§Ã£o com FNDE\\nâ€¢ Recurso administrativo\\n\\nðŸ“‹ SituaÃ§Ã£o atual:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nðŸ“š DICA: DocumentaÃ§Ã£o correta Ã© fundamental!\\n\\nðŸ“ž Vamos resolver juntos!`;\n    break;\n    \n  case 'cobranca':\n    response = `ðŸ’° COBRANÃ‡A INDEVIDA - FIES\\n\\nJM ADVOGADOS vai contestar cobranÃ§a abusiva.\\n\\nâœ… Podemos buscar:\\nâ€¢ Cancelamento da cobranÃ§a\\nâ€¢ DevoluÃ§Ã£o em dobro\\nâ€¢ Danos morais\\nâ€¢ RegularizaÃ§Ã£o do contrato\\n\\nðŸ“‹ Dados da cobranÃ§a:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nâš–ï¸ Se FIES deveria pagar, vocÃª nÃ£o deve nada!\\n\\nðŸ“ž Vamos processar essa cobranÃ§a indevida!`;\n    break;\n    \n  case 'renovacao':\n    response = `ðŸ”„ RENOVAÃ‡ÃƒO DE FIES\\n\\nTe ajudamos com todas as etapas da renovaÃ§Ã£o.\\n\\nâœ… Suporte completo:\\nâ€¢ OrientaÃ§Ã£o sobre documentaÃ§Ã£o\\nâ€¢ Acompanhamento do processo\\nâ€¢ ResoluÃ§Ã£o de pendÃªncias\\nâ€¢ Recurso se negado\\n\\nðŸ“‹ InformaÃ§Ãµes para renovaÃ§Ã£o:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nðŸ“… IMPORTANTE: NÃ£o perca os prazos!\\n\\nðŸ“ž Vamos garantir sua renovaÃ§Ã£o!`;\n    break;\n    \n  case 'transferencia':\n    response = `â†”ï¸ TRANSFERÃŠNCIA DE FIES\\n\\nTransferÃªncia de FIES tem regras especÃ­ficas.\\n\\nâœ… Te orientamos sobre:\\nâ€¢ Viabilidade da transferÃªncia\\nâ€¢ DocumentaÃ§Ã£o necessÃ¡ria\\nâ€¢ TrÃ¢mites com as instituiÃ§Ãµes\\nâ€¢ ManutenÃ§Ã£o do financiamento\\n\\nðŸ“‹ Dados da transferÃªncia:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nðŸŽ¯ Objetivo: Manter seu FIES ativo!\\n\\nðŸ“ž Vamos planejar sua transferÃªncia!`;\n    break;\n    \n  case 'quitacao':\n    response = `ðŸŽ“ QUITAÃ‡ÃƒO DO FIES\\n\\nFormou? Vamos analisar sua quitaÃ§Ã£o do FIES.\\n\\nâœ… VerificaÃ§Ã£o completa:\\nâ€¢ CÃ¡lculo da dÃ­vida\\nâ€¢ CorreÃ§Ã£o monetÃ¡ria\\nâ€¢ Possibilidade de desconto\\nâ€¢ Parcelamento\\n\\nðŸ“‹ Dados da quitaÃ§Ã£o:\\n${specificQuestions.map((q, i) => `${i+1}. ${q}`).join('\\n')}\\n\\nðŸ’¡ Muitas vezes hÃ¡ erro no cÃ¡lculo!\\n\\nðŸ“ž Vamos revisar sua quitaÃ§Ã£o!`;\n    break;\n    \n  default:\n    response = `ðŸŽ“ QUESTÃ•ES FIES\\n\\nJM ADVOGADOS Ã© especialista em problemas de FIES.\\n\\nâœ… Atuamos em:\\nâ€¢ Desbloqueio de financiamento\\nâ€¢ Problemas de documentaÃ§Ã£o\\nâ€¢ CobranÃ§as indevidas\\nâ€¢ RenovaÃ§Ã£o e transferÃªncia\\nâ€¢ QuitaÃ§Ã£o pÃ³s-formatura\\n\\nðŸ’° FIES Ã© investimento no seu futuro!\\n\\nðŸ“ž Vamos resolver sua situaÃ§Ã£o educacional!`;\n}\n\n// Resultado\nconst result = {\n  user_number: userNumber,\n  case_type: 'fies',\n  problem_type: problemType,\n  urgency: urgency,\n  estimated_value: estimatedValue,\n  specific_questions: specificQuestions,\n  response: response,\n  educational_specialty: true,\n  processed_at: new Date().toISOString()\n};\n\nconsole.log('ðŸ“¤ FIES processado:', result);\n\nreturn result;"
      },
      "id": "process-fies",
      "name": "Processar FIES",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}"
      },
      "id": "response-fies",
      "name": "Resposta FIES",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [640, 300]
    }
  ],
  "connections": {
    "Webhook FIES": {
      "main": [
        [
          {
            "node": "Processar FIES",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Processar FIES": {
      "main": [
        [
          {
            "node": "Resposta FIES",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {},
  "versionId": "1"
}
